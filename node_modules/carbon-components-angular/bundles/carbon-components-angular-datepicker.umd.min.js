/**
 *
 * carbon-angular v0.0.0 | carbon-components-angular-datepicker.umd.min.js
 *
 * Copyright 2014, 2021 IBM
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0

 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("flatpickr/dist/plugins/rangePlugin"),require("flatpickr"),require("@angular/forms"),require("rxjs"),require("flatpickr/dist/l10n/index"),require("carbon-components-angular/datepicker-input"),require("@angular/core"),require("@angular/common"),require("carbon-components-angular/utils"),require("carbon-components-angular/i18n")):"function"==typeof define&&define.amd?define("carbon-components-angular/datepicker",["exports","flatpickr/dist/plugins/rangePlugin","flatpickr","@angular/forms","rxjs","flatpickr/dist/l10n/index","carbon-components-angular/datepicker-input","@angular/core","@angular/common","carbon-components-angular/utils","carbon-components-angular/i18n"],e):e((t["carbon-components-angular"]=t["carbon-components-angular"]||{},t["carbon-components-angular"].datepicker={}),t.rangePlugin,t.flatpickr,t.ng.forms,t.rxjs,t.languages,t["carbon-components-angular"]["datepicker-input"],t.ng.core,t.ng.common,t["carbon-components-angular"].utils,t["carbon-components-angular"].i18n)}(this,function(t,e,n,a,i,r,s,c,l,o,p){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e,n=n&&n.hasOwnProperty("default")?n["default"]:n;var u="default"in r?r["default"]:r;function d(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var a,i,r=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(a=r.next()).done;)s.push(a.value)}catch(c){i={error:c}}finally{try{a&&!a.done&&(n=r["return"])&&n.call(r)}finally{if(i)throw i.error}}return s}(arguments[e]));return t}var h=function(t,e,n){return n.months[e?"shorthand":"longhand"][t]},f=".flatpickr-current-month",g=".numInputWrapper",k="cur-month",m=!1,y=function(e){var t=function(){var n;e.yearElements&&(n=h(e.currentMonth,!0===m,e.l10n),e.yearElements.forEach(function(t){var e=t.closest(f);Array.prototype.forEach.call(e.querySelectorAll(".cur-month"),function(t){t.textContent=n})}))};return{onMonthChange:t,onValueUpdate:t,onOpen:t,onReady:[function(){var t;e.monthElements&&e.yearElements&&(e.monthElements.forEach(function(t){t.parentNode&&t.parentNode.removeChild(t)}),(t=e.monthElements).splice.apply(t,d([0,e.monthElements.length],e.monthElements.map(function(){var t=e._createElement("span",k);return t.textContent=h(e.currentMonth,!0===m,e.l10n),e.yearElements[0].closest(f).insertBefore(t,e.yearElements[0].closest(g)),t}))))},t,function(){e.loadedPlugins.push("carbonFlatpickrMonthSelectPlugin")}]}},v=(Object.defineProperty(I.prototype,"inputPattern",{get:function(){return this.pattern},set:function(t){this.pattern=t},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"value",{get:function(){return this._value},set:function(t){t=t||[],this._value=t},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"flatpickrOptions",{get:function(){var t=d(this.plugins,[y]);return this.range&&t.push(e({input:"#"+this.id+"-rangeInput",position:"left"})),Object.assign({},this._flatpickrOptions,this.flatpickrBaseOptions,{mode:this.range?"range":"single",plugins:t,dateFormat:this.dateFormat,locale:u[this.language]})},set:function(t){this._flatpickrOptions=Object.assign({},this._flatpickrOptions,t)},enumerable:!0,configurable:!0}),I.prototype.ngOnInit=function(){var e=this;"en"!==this.i18n.getLocale()&&this.i18n.getLocaleObservable().subscribe(function(t){e.language=t,e.resetFlackpickrInstance()})},I.prototype.ngOnChanges=function(t){this.resetFlackpickrInstance(t.value)},I.prototype.ngAfterViewInit=function(){var e=this;this.visibilitySubscription=this.elementService.visibility(this.elementRef.nativeElement,this.elementRef.nativeElement).subscribe(function(t){e.isFlatpickrLoaded()&&e.flatpickrInstance.isOpen&&(e.flatpickrInstance._positionCalendar(e.elementRef.nativeElement.querySelector("#"+e.id+"-input")),t.visible||e.flatpickrInstance.close())}),setTimeout(function(){e.addInputListeners()},0)},I.prototype.ngAfterViewChecked=function(){this.isFlatpickrLoaded()||(this.flatpickrInstance=n("#"+this.id+"-input",this.flatpickrOptions),this.isFlatpickrLoaded()&&0<this.value.length&&this.setDateValues(this.value))},I.prototype.ngAfterContentInit=function(){u.en.weekdays.shorthand=u.en.weekdays.longhand.map(function(t){return"Thursday"===t?"Th":t.charAt(0)})},I.prototype.onFocus=function(){var t;this.range&&(this.rangeInput.input.nativeElement===document.activeElement&&this.flatpickrInstance.selectedDates[1]?(t=this.flatpickrInstance.selectedDates[1].getMonth(),this.flatpickrInstance.changeMonth(t,!1)):this.input.input.nativeElement===document.activeElement&&this.flatpickrInstance.selectedDates[0]&&(t=this.flatpickrInstance.selectedDates[0].getMonth(),this.flatpickrInstance.changeMonth(t,!1)))},I.prototype.onFocusOut=function(){this.onTouched()},I.prototype.writeValue=function(t){var e=this;this.value=t,setTimeout(function(){e.isFlatpickrLoaded()&&e.flatpickrInstance.config&&e.setDateValues(e.value)})},I.prototype.setDisabledState=function(t){this.disabled=t},I.prototype.registerOnChange=function(t){this.propagateChange=t},I.prototype.registerOnTouched=function(t){this.onTouched=t},I.prototype.ngOnDestroy=function(){this.isFlatpickrLoaded()&&(this.flatpickrInstance.destroy(),this.visibilitySubscription.unsubscribe())},I.prototype.onValueChange=function(t){var e;this.isFlatpickrLoaded()&&(e=this.flatpickrInstance.parseDate(t,this.dateFormat),this.range?this.setDateValues([e,this.flatpickrInstance.selectedDates[1]]):this.setDateValues([e]),this.doSelect(this.flatpickrInstance.selectedDates))},I.prototype.onRangeValueChange=function(t){var e;this.isFlatpickrLoaded()&&this.flatpickrInstance.isOpen&&(e=this.flatpickrInstance.parseDate(t,this.dateFormat),this.setDateValues([this.flatpickrInstance.selectedDates[0],e]),this.doSelect(this.flatpickrInstance.selectedDates))},I.prototype.openCalendar=function(t){var e;this.range?(t.input.nativeElement.click(),t===this.input&&this.flatpickrInstance.selectedDates[0]&&(e=this.flatpickrInstance.selectedDates[0].getMonth(),this.flatpickrInstance.currentYear=this.flatpickrInstance.selectedDates[0].getFullYear(),this.flatpickrInstance.changeMonth(e,!1))):this.flatpickrInstance.open()},I.prototype.updateCalendarListeners=function(){var e=this,t=document.querySelectorAll(".flatpickr-calendar");Array.from(t).forEach(function(t){t.removeEventListener("click",e.preventCalendarClose),t.addEventListener("click",e.preventCalendarClose)})},I.prototype.addInputListeners=function(){var t,a=this;this.isFlatpickrLoaded()&&(t=function(t){t.addEventListener("keydown",function(t){var e,n;"ArrowDown"===t.key&&(a.flatpickrInstance.isOpen||a.flatpickrInstance.open(),(n=(e=a.flatpickrInstance.calendarContainer)&&e.querySelector(".flatpickr-day[tabindex]"))&&(n.focus(),document.activeElement!==n&&a.flatpickrInstance.selectedDateElem&&a.flatpickrInstance.selectedDateElem.focus()))})},this.input&&this.input.input&&t(this.input.input.nativeElement),this.rangeInput&&this.rangeInput.input&&t(this.rangeInput.input.nativeElement))},I.prototype.resetFlackpickrInstance=function(t){var e;this.isFlatpickrLoaded()&&(e=this.flatpickrInstance.selectedDates,t&&this.didDateValueChange(t.currentValue,t.previousValue)&&(e=t.currentValue),this.flatpickrInstance=n("#"+this.id+"-input",this.flatpickrOptions),this.setDateValues(e))},I.prototype.updateClassNames=function(){var t,e,n,a,i,r,s,c=this;this.elementRef&&(t=document.querySelectorAll(".flatpickr-calendar"),e=document.querySelectorAll(".flatpickr-month"),n=document.querySelectorAll(".flatpickr-weekdays"),a=document.querySelectorAll(".flatpickr-weekday"),i=document.querySelectorAll(".flatpickr-days"),r=document.querySelectorAll(".flatpickr-day"),(s=function(e,t){Array.from(t).forEach(function(t){t.classList.contains(e)||t.classList.add(e)})})("bx--date-picker__calendar",t),s("bx--date-picker__month",e),s("bx--date-picker__weekdays",n),s("bx--date-picker__days",i),Array.from(a).forEach(function(t){t.innerHTML=t.innerHTML.replace(/\s+/g,""),t.classList.add("bx--date-picker__weekday")}),Array.from(r).forEach(function(t){t.classList.add("bx--date-picker__day"),c.value&&(t.classList.contains("today")&&0<c.value.length?t.classList.add("no-border"):t.classList.contains("today")&&0===c.value.length&&t.classList.remove("no-border"))}))},I.prototype.updateAttributes=function(){var e=this,t=document.querySelectorAll(".flatpickr-calendar");Array.from(t).forEach(function(t){t.setAttribute("role","region"),t.setAttribute("aria-label",e.ariaLabel)})},I.prototype.setDateValues=function(t){var e,n,a,i,r;this.isFlatpickrLoaded()&&(e=this.elementRef.nativeElement.querySelector("#"+this.id+"-input"),n=this.elementRef.nativeElement.querySelector("#"+this.id+"-rangeInput"),a=this.flatpickrInstance.selectedDateElem===document.activeElement,this.flatpickrInstance.setDate(t),a&&this.flatpickrInstance.selectedDateElem.focus(),i="","string"==typeof this.flatpickrInstance.selectedDates[0]?(i=this.flatpickrInstance.parseDate(this.flatpickrInstance.selectedDates[0],this.dateFormat),i=this.flatpickrInstance.formatDate(i,this.dateFormat)):this.flatpickrInstance.selectedDates[0]&&(i=this.flatpickrInstance.formatDate(this.flatpickrInstance.selectedDates[0],this.dateFormat)),n&&(r="","string"==typeof this.flatpickrInstance.selectedDates[1]?(r=this.flatpickrInstance.parseDate(this.flatpickrInstance.selectedDates[1].toString(),this.dateFormat),r=this.flatpickrInstance.formatDate(r,this.dateFormat)):this.flatpickrInstance.selectedDates[1]&&(r=this.flatpickrInstance.formatDate(this.flatpickrInstance.selectedDates[1],this.dateFormat)),setTimeout(function(){n.value=r,e.value=i})))},I.prototype.doSelect=function(t){var e,n;this.range&&this.flatpickrInstance.selectedDates[0]&&(e=this.flatpickrInstance.selectedDates[0].getMonth(),n=this.flatpickrInstance.selectedDateElem===document.activeElement,this.flatpickrInstance.changeMonth(e,!1),n&&this.flatpickrInstance.selectedDateElem.focus()),this.valueChange.emit(t),this.propagateChange(t)},I.prototype.didDateValueChange=function(t,e){return t[0]!==e[0]||t[1]!==e[1]},I.prototype.isFlatpickrLoaded=function(){return!!this.flatpickrInstance&&!!this.flatpickrInstance.setDate},I.prototype.rightArrowHTML=function(){return'\n\t\t\t<svg width="16px" height="16px" viewBox="0 0 16 16">\n\t\t\t\t<polygon points="11,8 6,13 5.3,12.3 9.6,8 5.3,3.7 6,3 "/>\n\t\t\t\t<rect width="16" height="16" style="fill:none" />\n\t\t\t</svg>'},I.prototype.leftArrowHTML=function(){return'\n\t\t\t<svg width="16px" height="16px" viewBox="0 0 16 16">\n\t\t\t\t<polygon points="5,8 10,3 10.7,3.7 6.4,8 10.7,12.3 10,13 "/>\n\t\t\t\t<rect width="16" height="16" style="fill:none" />\n\t\t\t</svg>'},I.datePickerCount=0,I.decorators=[{type:c.Component,args:[{selector:"ibm-date-picker",template:'\n\t<div class="bx--form-item">\n\t\t<div\n\t\t\tclass="bx--date-picker"\n\t\t\t[ngClass]="{\n\t\t\t\t\'bx--date-picker--range\' : range,\n\t\t\t\t\'bx--date-picker--single\' : !range,\n\t\t\t\t\'bx--date-picker--light\' : theme === \'light\',\n\t\t\t\t\'bx--skeleton\' : skeleton\n\t\t\t}">\n\t\t\t<div class="bx--date-picker-container">\n\t\t\t\t<ibm-date-picker-input\n\t\t\t\t\t#input\n\t\t\t\t\t[label]="label"\n\t\t\t\t\t[placeholder]="placeholder"\n\t\t\t\t\t[pattern]="inputPattern"\n\t\t\t\t\t[id]="id + \'-input\'"\n\t\t\t\t\t[size]="size"\n\t\t\t\t\t[type]="(range ? \'range\' : \'single\')"\n\t\t\t\t\t[hasIcon]="(range ? false : true)"\n\t\t\t\t\t[disabled]="disabled"\n\t\t\t\t\t[invalid]="invalid"\n\t\t\t\t\t[invalidText]="invalidText"\n\t\t\t\t\t[warn]="warn"\n\t\t\t\t\t[warnText]="warnText"\n\t\t\t\t\t[skeleton]="skeleton"\n\t\t\t\t\t(valueChange)="onValueChange($event)"\n\t\t\t\t\t(click)="openCalendar(input)">\n\t\t\t\t</ibm-date-picker-input>\n\t\t\t</div>\n\n\t\t\t<div *ngIf="range" class="bx--date-picker-container">\n\t\t\t\t<ibm-date-picker-input\n\t\t\t\t\t#rangeInput\n\t\t\t\t\t[label]="rangeLabel"\n\t\t\t\t\t[placeholder]="placeholder"\n\t\t\t\t\t[pattern]="inputPattern"\n\t\t\t\t\t[id]="id + \'-rangeInput\'"\n\t\t\t\t\t[size]="size"\n\t\t\t\t\t[type]="(range ? \'range\' : \'single\')"\n\t\t\t\t\t[hasIcon]="(range ? true : null)"\n\t\t\t\t\t[disabled]="disabled"\n\t\t\t\t\t[invalid]="rangeInvalid"\n\t\t\t\t\t[invalidText]="rangeInvalidText"\n\t\t\t\t\t[warn]="rangeWarn"\n\t\t\t\t\t[warnText]="rangeWarnText"\n\t\t\t\t\t[skeleton]="skeleton"\n\t\t\t\t\t(valueChange)="onRangeValueChange($event)"\n\t\t\t\t\t(click)="openCalendar(rangeInput)">\n\t\t\t\t</ibm-date-picker-input>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t',providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:I,multi:!0}],encapsulation:c.ViewEncapsulation.None,styles:[".dayContainer {\n\t\t\tjustify-content: initial;\n\t\t}"]}]}],I.ctorParameters=function(){return[{type:c.ElementRef},{type:o.ElementService},{type:p.I18n}]},I.propDecorators={range:[{type:c.Input}],dateFormat:[{type:c.Input}],language:[{type:c.Input}],label:[{type:c.Input}],rangeLabel:[{type:c.Input}],placeholder:[{type:c.Input}],ariaLabel:[{type:c.Input}],pattern:[{type:c.Input}],inputPattern:[{type:c.Input}],id:[{type:c.Input}],value:[{type:c.Input}],theme:[{type:c.Input}],disabled:[{type:c.Input}],invalid:[{type:c.Input}],invalidText:[{type:c.Input}],warn:[{type:c.Input}],warnText:[{type:c.Input}],size:[{type:c.Input}],rangeInvalid:[{type:c.Input}],rangeInvalidText:[{type:c.Input}],rangeWarn:[{type:c.Input}],rangeWarnText:[{type:c.Input}],skeleton:[{type:c.Input}],plugins:[{type:c.Input}],flatpickrOptions:[{type:c.Input}],input:[{type:c.ViewChild,args:["input",{"static":!0}]}],rangeInput:[{type:c.ViewChild,args:["rangeInput",{"static":!1}]}],valueChange:[{type:c.Output}],onFocus:[{type:c.HostListener,args:["focusin"]}],onFocusOut:[{type:c.HostListener,args:["focusout"]}]},I);function I(t,e,n){var a=this;this.elementRef=t,this.elementService=e,this.i18n=n,this.range=!1,this.dateFormat="m/d/Y",this.language="en",this.placeholder="mm/dd/yyyy",this.ariaLabel="calendar container",this.pattern="^\\d{1,2}/\\d{1,2}/\\d{4}$",this.id="datepicker-"+I.datePickerCount++,this.theme="dark",this.disabled=!1,this.invalid=!1,this.warn=!1,this.size="md",this.rangeInvalid=!1,this.rangeWarn=!1,this.skeleton=!1,this.plugins=[],this.valueChange=new c.EventEmitter,this._value=[],this._flatpickrOptions={allowInput:!0},this.flatpickrBaseOptions={mode:"single",dateFormat:"m/d/Y",plugins:this.plugins,onOpen:function(){a.updateClassNames(),a.updateAttributes(),a.updateCalendarListeners()},onClose:function(){if(a.range&&a.flatpickrInstance){if(2!==a.flatpickrInstance.selectedDates.length)return a.setDateValues([]),void a.doSelect([]);var t,e=a.input.input.nativeElement.value,n=a.rangeInput.input.nativeElement.value;(e||n)&&(t=function(t){return a.flatpickrInstance.parseDate(t,a.dateFormat)},a.setDateValues([t(e),t(n)]),a.doSelect(a.flatpickrInstance.selectedDates))}},onDayCreate:function(t,e,n,a){a.classList.add("bx--date-picker__day")},nextArrow:this.rightArrowHTML(),prevArrow:this.leftArrowHTML(),value:this.value},this.flatpickrInstance=null,this.visibilitySubscription=new i.Subscription,this.onTouched=function(){},this.propagateChange=function(t){},this.preventCalendarClose=function(t){return t.stopPropagation()}}var b=(D.decorators=[{type:c.NgModule,args:[{declarations:[v],exports:[v,s.DatePickerInputModule],imports:[l.CommonModule,s.DatePickerInputModule,o.UtilsModule,p.I18nModule]}]}],D);function D(){}t.DatePicker=v,t.DatePickerModule=b,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=carbon-components-angular-datepicker.umd.min.js.map